package v1

import (
	imageController "halo-suster/internal/delivery/http/v1/controller/image"
	userController "halo-suster/internal/delivery/http/v1/controller/user"
	userService "halo-suster/internal/service/user"

	"github.com/go-playground/validator/v10"
	"github.com/jmoiron/sqlx"
	"github.com/labstack/echo/v4"
	echoSwagger "github.com/swaggo/echo-swagger"

	_ "halo-suster/cmd/docs" // docs is generated by Swag CLI, you have to import it.
)

func Init(app *echo.Echo, db *sqlx.DB, val *validator.Validate) {
	var (
		userSvc = userService.New(db)
	)
	v1 := app.Group("/v1")
	userController.Init(v1, val, userSvc)
	imageController.Init(v1, val)
	v1.GET("/swagger/*", echoSwagger.WrapHandler)
}
